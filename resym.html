<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="main.css">
    <title>resym: Remote stack symbolication</title>
    <meta name="description" content="Remote stack symboication technique">
    <meta name="keywords" content="symbolicate, debuginfo, dwarf">
  </head>
  <body>
    <h1>resym: Remote stack symbolication</h1>
    <p>Debug information makes up a significant portion of the size of a binary.</p>
    <p>For applications that are distributed to end-users, it is common to strip debug information to reduce the size of the binary but that makes it difficult to debug crashes. One way to work around this is to collect crash reports from users and symbolicate them remotely.</p>
    <p>resym is a tool that collects and seralizes win64 stack traces into URF-safe strings without compromising user privacy. It can be used to symbolicate stack traces on a remote server.</p>
    <p><a href="https://github.com/littledivy/resym"><a href="https://github.com/littledivy/resym">https://github.com/littledivy/resym</a></a></p>
    <h2 class="!text-foreground">Design</h2>
    <h3>Stack walking</h3>
    <p>On x86_64 Windows, resym uses <code>RtlLookupFunctionEntry</code>-based stack unwinding to collect the instruction pointers, starting from the current %rip register.</p>
    <figure><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDEyLjIuMSAoMCkKIC0tPgo8IS0tIFRpdGxlOiBTdGFja1dhbGs2NCBQYWdlczogMSAtLT4KPHN2ZyB3aWR0aD0iMjUycHQiIGhlaWdodD0iNTgycHQiCiB2aWV3Qm94PSIwLjAwIDAuMDAgMjUyLjAwIDU4Mi4yMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CjxnIGlkPSJncmFwaDAiIGNsYXNzPSJncmFwaCIgdHJhbnNmb3JtPSJzY2FsZSgxIDEpIHJvdGF0ZSgwKSB0cmFuc2xhdGUoNCA1NzguMikiPgo8dGl0bGU+U3RhY2tXYWxrNjQ8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSIjZmZmZGY3IiBzdHJva2U9Im5vbmUiIHBvaW50cz0iLTQsNCAtNCwtNTc4LjIgMjQ4LC01NzguMiAyNDgsNCAtNCw0Ii8+CjwhLS0gZnJhbWU0IC0tPgo8ZyBpZD0ibm9kZTEiIGNsYXNzPSJub2RlIj4KPHRpdGxlPmZyYW1lNDwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiNmZGY2ZTMiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzcsLTQ4NC45NSA3NywtNTczLjcgMTY1LC01NzMuNyAxNjUsLTQ4NC45NSA3NywtNDg0Ljk1Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEyMSIgeT0iLTU2Mi4xIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjguMDAiPjB4MEZGRjA8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijc3LC01NTUuOTUgMTY1LC01NTUuOTUiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTIxIiB5PSItNTQ0LjM1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjguMDAiPlJJUD1yZXR1cm4gdG8gT1M8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijc3LC01MzguMiAxNjUsLTUzOC4yIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEyMSIgeT0iLTUyNi42IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjguMDAiPlJTUD0weDBGRkUwPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI3NywtNTIwLjQ1IDE2NSwtNTIwLjQ1Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEyMSIgeT0iLTUwOC44NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSI4LjAwIj5SQlA9MHgwRkZFODwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzcsLTUwMi43IDE2NSwtNTAyLjciLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTIxIiB5PSItNDkxLjEiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOC4wMCI+RnJhbWU6IE1haW4oKTwvdGV4dD4KPC9nPgo8IS0tIGNvbmQgLS0+CjxnIGlkPSJub2RlNSIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+Y29uZDwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNjksLTQ0Ny40NSAyNS4xOCwtNDI1Ljg1IDY5LC00MDQuMjUgMTEyLjgyLC00MjUuODUgNjksLTQ0Ny40NSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI2OSIgeT0iLTQyMy4xMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSI4LjAwIj5SSVAgPT0gMD88L3RleHQ+CjwvZz4KPCEtLSBmcmFtZTQmIzQ1OyZndDtjb25kIC0tPgo8ZyBpZD0iZWRnZTUiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPmZyYW1lNCYjNDU7Jmd0O2NvbmQ8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNOTguNjUsLTQ4NC43QzkzLjI1LC00NzQuMTYgODcuNjMsLTQ2My4yMSA4Mi43NiwtNDUzLjciLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iODUuOTksLTQ1Mi4zNCA3OC4zMiwtNDQ1LjAzIDc5Ljc2LC00NTUuNTMgODUuOTksLTQ1Mi4zNCIvPgo8L2c+CjwhLS0gZnJhbWUzIC0tPgo8ZyBpZD0ibm9kZTIiIGNsYXNzPSJub2RlIj4KPHRpdGxlPmZyYW1lMzwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiNlZWU4ZDUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzUuNzUsLTAuNSA3NS43NSwtODkuMjUgMTg2LjI1LC04OS4yNSAxODYuMjUsLTAuNSA3NS43NSwtMC41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEzMSIgeT0iLTc3LjY1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjguMDAiPjB4MEZGRTA8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijc1Ljc1LC03MS41IDE4Ni4yNSwtNzEuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMzEiIHk9Ii01OS45IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjguMDAiPlJJUD1yZXR1cm4gdG8gRnVuY0EoKTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNzUuNzUsLTUzLjc1IDE4Ni4yNSwtNTMuNzUiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTMxIiB5PSItNDIuMTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOC4wMCI+UlNQPTB4MEZGRDA8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijc1Ljc1LC0zNiAxODYuMjUsLTM2Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEzMSIgeT0iLTI0LjQiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOC4wMCI+UkJQPTB4MEZGRDg8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijc1Ljc1LC0xOC4yNSAxODYuMjUsLTE4LjI1Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEzMSIgeT0iLTYuNjUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOC4wMCI+RnJhbWU6IEZ1bmNBKCk8L3RleHQ+CjwvZz4KPCEtLSBmcmFtZTMmIzQ1OyZndDtmcmFtZTQgLS0+CjxnIGlkPSJlZGdlNCIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+ZnJhbWUzJiM0NTsmZ3Q7ZnJhbWU0PC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTE1OC44LC04OS42MUMxNjEuODgsLTk1LjU2IDE2NC43MiwtMTAxLjcgMTY3LC0xMDcuNzUgMTc4LjM0LC0xMzcuNzkgMTgxLC0xNDYuNTIgMTgxLC0xNzguNjIgMTgxLC00MjYuODUgMTgxLC00MjYuODUgMTgxLC00MjYuODUgMTgxLC00NDMuODEgMTc0LjcyLC00NjAuNDIgMTY2LjIxLC00NzUuMTMiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTYzLjQ5LC00NzIuODkgMTYxLjE1LC00ODMuMjIgMTY5LjQyLC00NzYuNiAxNjMuNDksLTQ3Mi44OSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyMTIuNSIgeT0iLTMxMi4yMyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSI3LjAwIj4gJiMxNjA7JiMxNjA7JiMxNjA7bmV4dCBmcmFtZTwvdGV4dD4KPC9nPgo8IS0tIGZyYW1lMiAtLT4KPGcgaWQ9Im5vZGUzIiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5mcmFtZTI8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSIjZWVlOGQ1IiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjAsLTEzNS4yNSAwLC0yMjQgMTQ0LC0yMjQgMTQ0LC0xMzUuMjUgMCwtMTM1LjI1Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjcyIiB5PSItMjEyLjQiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOC4wMCI+MHgwRkZEMDwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMCwtMjA2LjI1IDE0NCwtMjA2LjI1Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjcyIiB5PSItMTk0LjY1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjguMDAiPlJJUD1yZXR1cm4gdG8gU3RhY2tUcmFjZTY0KCk8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjAsLTE4OC41IDE0NCwtMTg4LjUiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNzIiIHk9Ii0xNzYuOSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSI4LjAwIj5SU1A9MHgwRkZDMDwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMCwtMTcwLjc1IDE0NCwtMTcwLjc1Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjcyIiB5PSItMTU5LjE1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjguMDAiPlJCUD0weDBGRkM4PC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIwLC0xNTMgMTQ0LC0xNTMiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNzIiIHk9Ii0xNDEuNCIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSI4LjAwIj5GcmFtZTogRnVuY0IoKTwvdGV4dD4KPC9nPgo8IS0tIGZyYW1lMiYjNDU7Jmd0O2ZyYW1lMyAtLT4KPGcgaWQ9ImVkZ2UzIiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5mcmFtZTImIzQ1OyZndDtmcmFtZTM8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNOTEuNDgsLTEzNC43OUM5Ni40MiwtMTIzLjY5IDEwMS43NywtMTExLjYzIDEwNi45MSwtMTAwLjA4Ii8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjExMC4wNiwtMTAxLjYxIDExMC45MiwtOTEuMDUgMTAzLjY2LC05OC43NiAxMTAuMDYsLTEwMS42MSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMzQuNzciIHk9Ii0xMTAuMSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSI3LjAwIj4gJiMxNjA7JiMxNjA7JiMxNjA7bmV4dCBmcmFtZTwvdGV4dD4KPC9nPgo8IS0tIGZyYW1lMSAtLT4KPGcgaWQ9Im5vZGU0IiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5mcmFtZTE8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSIjZmRmNmUzIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEzLjc1LC0yNzAgMTMuNzUsLTM1OC43NSAxMjQuMjUsLTM1OC43NSAxMjQuMjUsLTI3MCAxMy43NSwtMjcwIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjY5IiB5PSItMzQ3LjE1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjguMDAiPjB4MEZGQzA8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEzLjc1LC0zNDEgMTI0LjI1LC0zNDEiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNjkiIHk9Ii0zMjkuNCIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSI4LjAwIj5SSVA9Y3VycmVudDwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTMuNzUsLTMyMy4yNSAxMjQuMjUsLTMyMy4yNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI2OSIgeT0iLTMxMS42NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSI4LjAwIj5SU1A9MHgwRkZCMDwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTMuNzUsLTMwNS41IDEyNC4yNSwtMzA1LjUiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNjkiIHk9Ii0yOTMuOSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSI4LjAwIj5SQlA9MHgwMEZGQjg8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEzLjc1LC0yODcuNzUgMTI0LjI1LC0yODcuNzUiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNjkiIHk9Ii0yNzYuMTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOC4wMCI+RnJhbWU6IFN0YWNrVHJhY2U2NCgpPC90ZXh0Pgo8L2c+CjwhLS0gZnJhbWUxJiM0NTsmZ3Q7ZnJhbWUyIC0tPgo8ZyBpZD0iZWRnZTIiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPmZyYW1lMSYjNDU7Jmd0O2ZyYW1lMjwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik02My42LC0yNjkuNTNDNjMuMDYsLTI2MC41OSA2Mi45LC0yNTEuMjQgNjMuNSwtMjQyLjUgNjMuNjUsLTI0MC4zMSA2My44MywtMjM4LjA4IDY0LjAzLC0yMzUuODMiLz4KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNjcuNSwtMjM2LjMxIDY1LjA2LC0yMjYgNjAuNTQsLTIzNS41OCA2Ny41LC0yMzYuMzEiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTE1LjI1IiB5PSItMjQ0Ljg1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjcuMDAiPiAmIzE2MDsmIzE2MDsmIzE2MDsmIzE2MDtSdGxWaXJ0dWFsVW53aW5kKCk8L3RleHQ+CjwvZz4KPCEtLSBjb25kJiM0NTsmZ3Q7ZnJhbWUxIC0tPgo8ZyBpZD0iZWRnZTYiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPmNvbmQmIzQ1OyZndDtmcmFtZTE8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNiNTg5MDAiIHN0cm9rZS1kYXNoYXJyYXk9IjUsMiIgZD0iTTY5LC00MDMuNzRDNjksLTM5NC4xNCA2OSwtMzgyLjI4IDY5LC0zNzAuNCIvPgo8cG9seWdvbiBmaWxsPSIjYjU4OTAwIiBzdHJva2U9IiNiNTg5MDAiIHBvaW50cz0iNzIuNSwtMzcwLjU5IDY5LC0zNjAuNTkgNjUuNSwtMzcwLjU5IDcyLjUsLTM3MC41OSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI3OCIgeT0iLTM3OS42IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjcuMDAiPiAmIzE2MDtubzwvdGV4dD4KPC9nPgo8IS0tIHN0YXJ0IC0tPgo8ZyBpZD0ibm9kZTYiIGNsYXNzPSJub2RlIj4KPHRpdGxlPnN0YXJ0PC90aXRsZT4KPGVsbGlwc2UgZmlsbD0iIzIyMjIyMiIgc3Ryb2tlPSJibGFjayIgY3g9IjEzOCIgY3k9Ii00MjUuODUiIHJ4PSI3LjIiIHJ5PSI3LjIiLz4KPC9nPgo8IS0tIHN0YXJ0JiM0NTsmZ3Q7ZnJhbWUxIC0tPgo8ZyBpZD0iZWRnZTEiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPnN0YXJ0JiM0NTsmZ3Q7ZnJhbWUxPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTEzNC40OCwtNDE5LjI3QzEyOC40NCwtNDA5LjY4IDExNS40OSwtMzg5LjEzIDEwMi42OCwtMzY4LjgyIi8+Cjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEwNS43NCwtMzY3LjEgOTcuNDUsLTM2MC41MSA5OS44MiwtMzcwLjg0IDEwNS43NCwtMzY3LjEiLz4KPC9nPgo8L2c+Cjwvc3ZnPgo=" style="width: 60%"></figure>
    <p><br></p>
    <p>We first capture the caller’s context using <code>RtlCaptureContext</code> and then walk the stack using <code>RtlLookupFunctionEntry</code> and <code>RtlVirtualUnwind</code>. This requires thread to be suspended (except for the current thread) which is the case for panic handlers.</p>
    <pre><code data-lang="rust">std::panic::set_hook(<span style="color: #4b69c6">Box</span>::new(|_| {<br>  <span style="color: #d73948">let</span> trace_str <span style="color: #d73948">=</span> resym::win64::trace();<br>});</code></pre>
    <p>Before encoding, each stack address is calculated by subtracting the base address of the module that contains the address.</p>
    <h3>Representation</h3>
    <p>A “trace string” is a sequence of URL-safe Base64 VLQ-encoded strings. This string can be safely shared with the crash reporter and sent to a remote server for symbolication.</p>
    <figure><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDEyLjIuMSAoMCkKIC0tPgo8IS0tIFRpdGxlOiBWTFFTdHJpbmdCaXRzUmVhbCBQYWdlczogMSAtLT4KPHN2ZyB3aWR0aD0iMzA4cHQiIGhlaWdodD0iODFwdCIKIHZpZXdCb3g9IjAuMDAgMC4wMCAzMDguMDAgODEuMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgo8ZyBpZD0iZ3JhcGgwIiBjbGFzcz0iZ3JhcGgiIHRyYW5zZm9ybT0ic2NhbGUoMSAxKSByb3RhdGUoMCkgdHJhbnNsYXRlKDQgNzcpIj4KPHRpdGxlPlZMUVN0cmluZ0JpdHNSZWFsPC90aXRsZT4KPHBvbHlnb24gZmlsbD0iI2ZmZmRmNyIgc3Ryb2tlPSJub25lIiBwb2ludHM9Ii00LDQgLTQsLTc3IDMwNCwtNzcgMzA0LDQgLTQsNCIvPgo8IS0tIGJ1ZmZlciAtLT4KPGcgaWQ9Im5vZGUxIiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5idWZmZXI8L3RpdGxlPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjMwLjI1IiB5PSItNTguNCIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC13ZWlnaHQ9ImJvbGQiIGZvbnQtc2l6ZT0iOC4wMCIgZmlsbD0iI2I1ODkwMCI+MTwvdGV4dD4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI3Ny4yNSIgeT0iLTU4LjQiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtd2VpZ2h0PSJib2xkIiBmb250LXNpemU9IjguMDAiIGZpbGw9IiNiNTg5MDAiPjE8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTI0LjI1IiB5PSItNTguNCIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC13ZWlnaHQ9ImJvbGQiIGZvbnQtc2l6ZT0iOC4wMCIgZmlsbD0iI2I1ODkwMCI+MDwvdGV4dD4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxNzEuMjUiIHk9Ii01OC40IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXdlaWdodD0iYm9sZCIgZm9udC1zaXplPSI4LjAwIiBmaWxsPSIjMjY4YmQyIj4xPC90ZXh0Pgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjIxOC4yNSIgeT0iLTU4LjQiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtd2VpZ2h0PSJib2xkIiBmb250LXNpemU9IjguMDAiIGZpbGw9IiMyNjhiZDIiPjA8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMjY1LjI1IiB5PSItNTguNCIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC13ZWlnaHQ9ImJvbGQiIGZvbnQtc2l6ZT0iOC4wMCIgZmlsbD0iIzg1OTkwMCI+MDwvdGV4dD4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI2NiIgeT0iLTQyLjY1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXdlaWdodD0iYm9sZCIgZm9udC1zaXplPSI4LjAwIiBmaWxsPSIjYjU4OTAwIj5NYWluKCk8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTgxLjI1IiB5PSItNDIuNjUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtd2VpZ2h0PSJib2xkIiBmb250LXNpemU9IjguMDAiIGZpbGw9IiMyNjhiZDIiPkZ1bmNBKCk8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMjUxLjc1IiB5PSItNDIuNjUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtd2VpZ2h0PSJib2xkIiBmb250LXNpemU9IjguMDAiIGZpbGw9IiM4NTk5MDAiPkZ1bmNCKCk8L3RleHQ+Cjxwb2x5Z29uIGZpbGw9IiNiNTg5MDAiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSIxMCwtMjEuNzUgMTAsLTM1LjUgNTUsLTM1LjUgNTUsLTIxLjc1IDEwLC0yMS43NSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjIzLjUiIHk9Ii0yNS45IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjguMDAiPjB4Qzg8L3RleHQ+Cjxwb2x5Z29uIGZpbGw9IiNiNTg5MDAiIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSI1NywtMjEuNzUgNTcsLTM1LjUgMTAyLC0zNS41IDEwMiwtMjEuNzUgNTcsLTIxLjc1Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iNzAuNSIgeT0iLTI1LjkiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOC4wMCI+MHg5MjwvdGV4dD4KPHBvbHlnb24gZmlsbD0iI2I1ODkwMCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjEwNCwtMjEuNzUgMTA0LC0zNS41IDE0OSwtMzUuNSAxNDksLTIxLjc1IDEwNCwtMjEuNzUiLz4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxMTcuNSIgeT0iLTI1LjkiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOC4wMCI+MHgzNDwvdGV4dD4KPHBvbHlnb24gZmlsbD0iIzI2OGJkMiIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjE1MSwtMjEuNzUgMTUxLC0zNS41IDE5NiwtMzUuNSAxOTYsLTIxLjc1IDE1MSwtMjEuNzUiLz4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxNjQuNSIgeT0iLTI1LjkiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOC4wMCI+MHhGODwvdGV4dD4KPHBvbHlnb24gZmlsbD0iIzI2OGJkMiIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjE5OCwtMjEuNzUgMTk4LC0zNS41IDI0MywtMzUuNSAyNDMsLTIxLjc1IDE5OCwtMjEuNzUiLz4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIyMTEuNSIgeT0iLTI1LjkiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOC4wMCI+MHgwMTwvdGV4dD4KPHBvbHlnb24gZmlsbD0iIzg1OTkwMCIgc3Ryb2tlPSJub25lIiBwb2ludHM9IjI0NSwtMjEuNzUgMjQ1LC0zNS41IDI5MCwtMzUuNSAyOTAsLTIxLjc1IDI0NSwtMjEuNzUiLz4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIyNTguNSIgeT0iLTI1LjkiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOC4wMCI+MHg0QTwvdGV4dD4KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI2MS41IiB5PSItMTAuMTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOC4wMCIgZmlsbD0iI2I1ODkwMCI+MHgwMDEyMzQ8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTc5IiB5PSItMTAuMTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOC4wMCIgZmlsbD0iIzI2OGJkMiI+MHgwMDAwRjg8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMjQ5LjUiIHk9Ii0xMC4xNSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSI4LjAwIiBmaWxsPSIjODU5OTAwIj4weDAwMDA0QTwvdGV4dD4KPC9nPgo8L2c+Cjwvc3ZnPgo=" style="width: 100%"></figure>
    <p>Here’s an example of a trace string: <code>upvCsknB2z8xrB-w7xrB-0qxrBs15xrBonm5zBqsuB2sjC8gMiqiCylyvrB0niCy1uBwltmzBut0L4y_uB</code></p>
    <h3>Symbolication</h3>
    <p>resym’s symbolicate API decodes the trace string and finds the function frame using pdb-addr2line, the function frames are then passed to a formatter.</p>
    <pre><code data-lang="rust"><span style="color: #d73948">use</span> resym::{symbolicate, DefaultFormatter};<br><span style="color: #d73948">use</span> std::fs::File;<br><br><span style="color: #d73948">let</span> pdb <span style="color: #d73948">=</span> File::open(<span style="color: #198810">"</span><span style="color: #198810">path/to/symbols.pdb</span><span style="color: #198810">"</span>)<span style="color: #d73948">?</span>;<br><br><span style="color: #4b69c6">symbolicate</span>(<br>  pdb,<br>  trace_str,<br>  DefaultFormatter::new(<span style="color: #d73948">&amp;</span><span style="color: #d73948">mut</span> std::io::stdout()),<br>)<span style="color: #d73948">?</span>;</code></pre>
    <p>You can bring your own <code>Formatter</code> too.</p>
    <pre><code data-lang="rust"><span style="color: #d73948">const</span> <span style="color: #b60157">CSS</span>: <span style="color: #d73948">&amp;</span><span style="color: #d73948">str</span> <span style="color: #d73948">=</span> <span style="color: #16718d">include_str!</span>(<span style="color: #198810">"</span><span style="color: #198810">style.css</span><span style="color: #198810">"</span>);<br><br><span style="color: #d73948">impl</span>&lt;<span style="color: #d73948">'a</span>> <span style="color: #4b69c6">HtmlFormatter</span>&lt;<span style="color: #d73948">'a</span>> {<br>  <span style="color: #d73948">fn</span> <span style="color: #4b69c6">new</span>(writer: <span style="color: #d73948">&amp;</span><span style="color: #d73948">'a</span> <span style="color: #d73948">mut</span> <span style="color: #4b69c6">Vec</span>&lt;<span style="color: #d73948">u8</span>>) -> <span style="color: #d73948">Self</span> {<br>    <span style="color: #d73948">let</span> <span style="color: #d73948">_</span> <span style="color: #d73948">=</span> <span style="color: #16718d">writeln!</span>(writer, <span style="color: #198810">"</span><span style="color: #198810">&lt;style></span><span style="color: #b60157">{}</span><span style="color: #198810">&lt;/style></span><span style="color: #198810">"</span>, <span style="color: #b60157">CSS</span>);<br>    <span style="color: #d73948">Self</span> { writer }<br>  }<br>}<br><br><span style="color: #d73948">impl</span> Formatter <span style="color: #d73948">for</span> <span style="color: #4b69c6">HtmlFormatter</span>&lt;'<span style="color: #d73948">_</span>> {<br>  <span style="color: #d73948">fn</span> <span style="color: #4b69c6">write_frames</span>(<br>    <span style="color: #d73948">&amp;</span><span style="color: #d73948">mut</span> self,<br>    addr: <span style="color: #d73948">u32</span>,<br>    frame: <span style="color: #d73948">&amp;</span>resym::pdb_addr2line::FunctionFrames,<br>  ) {<br>    <span style="color: #d73948">for</span> frame <span style="color: #d73948">in</span> <span style="color: #d73948">&amp;</span>frame.frames {<br>      <span style="color: #d73948">let</span> source_str <span style="color: #d73948">=</span><br>        <span style="color: #4b69c6">maybe_link_source</span>(<br>          frame.file.<span style="color: #4b69c6">as_deref</span>().<span style="color: #4b69c6">unwrap_or</span>(<span style="color: #198810">"</span><span style="color: #198810">??</span><span style="color: #198810">"</span>),<br>          frame.line<br>        );<br>      <span style="color: #d73948">let</span> <span style="color: #d73948">_</span> <span style="color: #d73948">=</span> <span style="color: #16718d">writeln!</span>(<br>        self.writer,<br>        <span style="color: #198810">"</span><span style="color: #198810">     &lt;li>0x</span><span style="color: #b60157">{:x}</span><span style="color: #198810">: &lt;code></span><span style="color: #b60157">{}</span><span style="color: #198810">&lt;/code> at </span><span style="color: #b60157">{}</span><span style="color: #198810">&lt;/li></span><span style="color: #198810">"</span>,<br>        addr,<br>        frame.function.<span style="color: #4b69c6">as_deref</span>().<span style="color: #4b69c6">unwrap_or</span>(<span style="color: #198810">"</span><span style="color: #198810">&lt;unknown></span><span style="color: #198810">"</span>),<br>        source_str,<br>      );<br>    }<br>  }<br>}</code></pre>
    <h3>Infrastructure</h3>
    <p>resym is used in Deno for Rust panic trace collection.</p>
    <p>When a crash occurs, resym encodes the collected instruction pointers into a compact “trace string” and sends it to the remote symbolication service.</p>
    <p>Deno’s release pipeline uploads debug artifacts (.pdb, .dSYM, .elf) to a storage bucket after generating compact symcache files. These caches are essentially fast symbol lookup tables.</p>
    <figure><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDEyLjIuMSAoMCkKIC0tPgo8IS0tIFRpdGxlOiBSZWxlYXNlIFBhZ2VzOiAxIC0tPgo8c3ZnIHdpZHRoPSI0NDRwdCIgaGVpZ2h0PSIyNDlwdCIKIHZpZXdCb3g9IjAuMDAgMC4wMCA0NDQuMDAgMjQ5LjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGcgaWQ9ImdyYXBoMCIgY2xhc3M9ImdyYXBoIiB0cmFuc2Zvcm09InNjYWxlKDEgMSkgcm90YXRlKDApIHRyYW5zbGF0ZSg0IDI0NSkiPgo8dGl0bGU+UmVsZWFzZTwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiNmZmZkZjciIHN0cm9rZT0ibm9uZSIgcG9pbnRzPSItNCw0IC00LC0yNDUgNDQwLC0yNDUgNDQwLDQgLTQsNCIvPgo8ZyBpZD0iY2x1c3QxIiBjbGFzcz0iY2x1c3RlciI+Cjx0aXRsZT5jbHVzdGVyX3JlbGVhc2VfeW1sPC90aXRsZT4KPHBhdGggZmlsbD0iI2ZkZjZlMyIgc3Ryb2tlPSIjZWVlOGQ1IiBkPSJNMTU0LC04MEMxNTQsLTgwIDQxNiwtODAgNDE2LC04MCA0MjIsLTgwIDQyOCwtODYgNDI4LC05MiA0MjgsLTkyIDQyOCwtMjIxIDQyOCwtMjIxIDQyOCwtMjI3IDQyMiwtMjMzIDQxNiwtMjMzIDQxNiwtMjMzIDE1NCwtMjMzIDE1NCwtMjMzIDE0OCwtMjMzIDE0MiwtMjI3IDE0MiwtMjIxIDE0MiwtMjIxIDE0MiwtOTIgMTQyLC05MiAxNDIsLTg2IDE0OCwtODAgMTU0LC04MCIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyODUiIHk9Ii0yMTUuNyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5yZWxlYXNlLnltbDwvdGV4dD4KPC9nPgo8ZyBpZD0iY2x1c3QyIiBjbGFzcz0iY2x1c3RlciI+Cjx0aXRsZT5jbHVzdGVyX2djczwvdGl0bGU+CjxwYXRoIGZpbGw9IiNmZmZkZjciIHN0cm9rZT0iIzkzYTFhMSIgc3Ryb2tlLWRhc2hhcnJheT0iNSwyIiBkPSJNMTkwLC04QzE5MCwtOCAyMzYsLTggMjM2LC04IDI0MiwtOCAyNDgsLTE0IDI0OCwtMjAgMjQ4LC0yMCAyNDgsLTQ4IDI0OCwtNDggMjQ4LC01NCAyNDIsLTYwIDIzNiwtNjAgMjM2LC02MCAxOTAsLTYwIDE5MCwtNjAgMTg0LC02MCAxNzgsLTU0IDE3OCwtNDggMTc4LC00OCAxNzgsLTIwIDE3OCwtMjAgMTc4LC0xNCAxODQsLTggMTkwLC04Ii8+CjwvZz4KPGcgaWQ9ImNsdXN0MyIgY2xhc3M9ImNsdXN0ZXIiPgo8dGl0bGU+Y2x1c3Rlcl9wYW5pYzwvdGl0bGU+CjxwYXRoIGZpbGw9IiNmZmZkZjciIHN0cm9rZT0iIzkzYTFhMSIgc3Ryb2tlLWRhc2hhcnJheT0iNSwyIiBkPSJNMjAsLThDMjAsLTggMTIyLC04IDEyMiwtOCAxMjgsLTggMTM0LC0xNCAxMzQsLTIwIDEzNCwtMjAgMTM0LC0xNDQuNSAxMzQsLTE0NC41IDEzNCwtMTUwLjUgMTI4LC0xNTYuNSAxMjIsLTE1Ni41IDEyMiwtMTU2LjUgMjAsLTE1Ni41IDIwLC0xNTYuNSAxNCwtMTU2LjUgOCwtMTUwLjUgOCwtMTQ0LjUgOCwtMTQ0LjUgOCwtMjAgOCwtMjAgOCwtMTQgMTQsLTggMjAsLTgiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNzEiIHk9Ii0xMzkuMiIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIj5wYW5pYy5kZW5vLmNvbTwvdGV4dD4KPC9nPgo8IS0tIERlbm8gLS0+CjxnIGlkPSJub2RlMSIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+RGVubzwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiNmZGY2ZTMiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMjA0LC0yMDAuNSAxNTQsLTIwMC41IDE1MCwtMTk2LjUgMTUwLC0xNjQuNSAyMDAsLTE2NC41IDIwNCwtMTY4LjUgMjA0LC0yMDAuNSIvPgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIyMDAsLTE5Ni41IDE1MCwtMTk2LjUiLz4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMjAwLC0xOTYuNSAyMDAsLTE2NC41Ii8+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjIwMCwtMTk2LjUgMjA0LC0yMDAuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNzciIHk9Ii0xNzkuNTciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOS4wMCI+ZGVubzwvdGV4dD4KPC9nPgo8IS0tIHN5bWJvbGljYXRlIC0tPgo8ZyBpZD0ibm9kZTciIGNsYXNzPSJub2RlIj4KPHRpdGxlPnN5bWJvbGljYXRlPC90aXRsZT4KPGVsbGlwc2UgZmlsbD0iI2ZkZjZlMyIgc3Ryb2tlPSJibGFjayIgY3g9Ijc2IiBjeT0iLTEwNiIgcng9IjQ5Ljg1IiByeT0iMTgiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNzYiIHk9Ii0xMDMuMDgiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOS4wMCI+c3ltYm9saWNhdGUoKTwvdGV4dD4KPC9nPgo8IS0tIERlbm8mIzQ1OyZndDtzeW1ib2xpY2F0ZSAtLT4KPGcgaWQ9ImVkZ2U1IiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5EZW5vJiM0NTsmZ3Q7c3ltYm9saWNhdGU8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2NTdiODMiIGQ9Ik0xNDkuOSwtMTY0LjY1QzE0NS44NywtMTYxLjk5IDE0MS43OSwtMTU5LjIyIDEzOCwtMTU2LjUgMTI2LjQ4LC0xNDguMjUgMTE0LjIxLC0xMzguNjMgMTAzLjY1LC0xMzAuMDkiLz4KPHBvbHlnb24gZmlsbD0iIzY1N2I4MyIgc3Ryb2tlPSIjNjU3YjgzIiBwb2ludHM9IjEwNiwtMTI3LjQ5IDk2LjA0LC0xMjMuODcgMTAxLjU3LC0xMzIuOTEgMTA2LC0xMjcuNDkiLz4KPC9nPgo8IS0tIFBkYiAtLT4KPGcgaWQ9Im5vZGUyIiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5QZGI8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSIjZjlmOWY5IiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjI3NiwtMjAwLjUgMjIyLC0yMDAuNSAyMjIsLTE2NC41IDI3NiwtMTY0LjUgMjc2LC0yMDAuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyNDkiIHk9Ii0xNzkuNTciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOS4wMCI+LnBkYjwvdGV4dD4KPC9nPgo8IS0tIFN5bWNhY2hlIC0tPgo8ZyBpZD0ibm9kZTUiIGNsYXNzPSJub2RlIj4KPHRpdGxlPlN5bWNhY2hlPC90aXRsZT4KPHBvbHlnb24gZmlsbD0iI2VlZThkNSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIzMTQsLTEyNCAyNTYsLTEyNCAyNTYsLTg4IDMxNCwtODggMzE0LC0xMjQiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjg1IiB5PSItMTAzLjA4IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjkuMDAiPnN5bWNhY2hlPC90ZXh0Pgo8L2c+CjwhLS0gUGRiJiM0NTsmZ3Q7U3ltY2FjaGUgLS0+CjxnIGlkPSJlZGdlMSIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+UGRiJiM0NTsmZ3Q7U3ltY2FjaGU8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2NTdiODMiIGQ9Ik0yNTcuMzUsLTE2NC4yMkMyNjEuNTksLTE1NS40NSAyNjYuODUsLTE0NC41NyAyNzEuNjMsLTEzNC42NyIvPgo8cG9seWdvbiBmaWxsPSIjNjU3YjgzIiBzdHJva2U9IiM2NTdiODMiIHBvaW50cz0iMjc0LjcxLC0xMzYuMzMgMjc1LjkxLC0xMjUuODEgMjY4LjQxLC0xMzMuMjkgMjc0LjcxLC0xMzYuMzMiLz4KPC9nPgo8IS0tIERzeW0gLS0+CjxnIGlkPSJub2RlMyIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+RHN5bTwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiNmOWY5ZjkiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMzQ4LC0yMDAuNSAyOTQsLTIwMC41IDI5NCwtMTY0LjUgMzQ4LC0xNjQuNSAzNDgsLTIwMC41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjMyMSIgeT0iLTE3OS41NyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSI5LjAwIj4uZFNZTTwvdGV4dD4KPC9nPgo8IS0tIERzeW0mIzQ1OyZndDtTeW1jYWNoZSAtLT4KPGcgaWQ9ImVkZ2UyIiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5Ec3ltJiM0NTsmZ3Q7U3ltY2FjaGU8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2NTdiODMiIGQ9Ik0zMTIuNjUsLTE2NC4yMkMzMDguNDEsLTE1NS40NSAzMDMuMTUsLTE0NC41NyAyOTguMzcsLTEzNC42NyIvPgo8cG9seWdvbiBmaWxsPSIjNjU3YjgzIiBzdHJva2U9IiM2NTdiODMiIHBvaW50cz0iMzAxLjU5LC0xMzMuMjkgMjk0LjA5LC0xMjUuODEgMjk1LjI5LC0xMzYuMzMgMzAxLjU5LC0xMzMuMjkiLz4KPC9nPgo8IS0tIEVsZiAtLT4KPGcgaWQ9Im5vZGU0IiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5FbGY8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSIjZjlmOWY5IiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjQyMCwtMjAwLjUgMzY2LC0yMDAuNSAzNjYsLTE2NC41IDQyMCwtMTY0LjUgNDIwLC0yMDAuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzOTMiIHk9Ii0xNzkuNTciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iOS4wMCI+LmVsZjwvdGV4dD4KPC9nPgo8IS0tIEVsZiYjNDU7Jmd0O1N5bWNhY2hlIC0tPgo8ZyBpZD0iZWRnZTMiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPkVsZiYjNDU7Jmd0O1N5bWNhY2hlPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjU3YjgzIiBkPSJNMzY3LjY4LC0xNjQuMDNDMzUzLjMzLC0xNTQuMTMgMzM1LjE2LC0xNDEuNiAzMTkuNTIsLTEzMC44MSIvPgo8cG9seWdvbiBmaWxsPSIjNjU3YjgzIiBzdHJva2U9IiM2NTdiODMiIHBvaW50cz0iMzIxLjYzLC0xMjguMDEgMzExLjQxLC0xMjUuMjIgMzE3LjY1LC0xMzMuNzggMzIxLjYzLC0xMjguMDEiLz4KPC9nPgo8IS0tIEdDUyAtLT4KPGcgaWQ9Im5vZGU2IiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5HQ1M8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjI0MCwtNTIgMTg2LC01MiAxODYsLTE2IDI0MCwtMTYgMjQwLC01MiIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyMTMiIHk9Ii0zMS4wNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSI5LjAwIj5nY3M8L3RleHQ+CjwvZz4KPCEtLSBTeW1jYWNoZSYjNDU7Jmd0O0dDUyAtLT4KPGcgaWQ9ImVkZ2U0IiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5TeW1jYWNoZSYjNDU7Jmd0O0dDUzwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzY1N2I4MyIgZD0iTTI2Ny4yLC04Ny43QzI1OC43MiwtNzkuNDUgMjQ4LjQxLC02OS40MyAyMzkuMDcsLTYwLjM1Ii8+Cjxwb2x5Z29uIGZpbGw9IiM2NTdiODMiIHN0cm9rZT0iIzY1N2I4MyIgcG9pbnRzPSIyNDEuNTQsLTU3Ljg2IDIzMS45MywtNTMuNCAyMzYuNjYsLTYyLjg4IDI0MS41NCwtNTcuODYiLz4KPC9nPgo8IS0tIHN5bWJvbGljYXRlJiM0NTsmZ3Q7R0NTIC0tPgo8ZyBpZD0iZWRnZTYiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPnN5bWJvbGljYXRlJiM0NTsmZ3Q7R0NTPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNjU3YjgzIiBkPSJNMTE0LjA5LC04NS41NEMxMzYuOTIsLTczLjg3IDE2NS4zOSwtNTkuMzMgMTg1LjkyLC00OC44NCIvPgo8cG9seWdvbiBmaWxsPSIjNjU3YjgzIiBzdHJva2U9IiM2NTdiODMiIHBvaW50cz0iMTEyLjcxLC04Mi4zMSAxMDUuNCwtODkuOTggMTE1LjksLTg4LjU0IDExMi43MSwtODIuMzEiLz4KPC9nPgo8IS0tIGFkZHJtYXAgLS0+CjxnIGlkPSJub2RlOCIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+YWRkcm1hcDwvdGl0bGU+CjxwYXRoIGZpbGw9IiNmOWY5ZjkiIHN0cm9rZT0iYmxhY2siIGQ9Ik0xMjYuMjUsLTQ4LjczQzEyNi4yNSwtNTAuNTMgMTAxLjQ5LC01MiA3MSwtNTIgNDAuNTEsLTUyIDE1Ljc1LC01MC41MyAxNS43NSwtNDguNzMgMTUuNzUsLTQ4LjczIDE1Ljc1LC0xOS4yNyAxNS43NSwtMTkuMjcgMTUuNzUsLTE3LjQ3IDQwLjUxLC0xNiA3MSwtMTYgMTAxLjQ5LC0xNiAxMjYuMjUsLTE3LjQ3IDEyNi4yNSwtMTkuMjcgMTI2LjI1LC0xOS4yNyAxMjYuMjUsLTQ4LjczIDEyNi4yNSwtNDguNzMiLz4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTEyNi4yNSwtNDguNzNDMTI2LjI1LC00Ni45MiAxMDEuNDksLTQ1LjQ1IDcxLC00NS40NSA0MC41MSwtNDUuNDUgMTUuNzUsLTQ2LjkyIDE1Ljc1LC00OC43MyIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI3MSIgeT0iLTMxLjA3IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjkuMDAiPktWIGFkZHJlc3MgbWFwcGluZzwvdGV4dD4KPC9nPgo8IS0tIHN5bWJvbGljYXRlJiM0NTsmZ3Q7YWRkcm1hcCAtLT4KPGcgaWQ9ImVkZ2U3IiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5zeW1ib2xpY2F0ZSYjNDU7Jmd0O2FkZHJtYXA8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNiNTg5MDAiIHN0cm9rZS1kYXNoYXJyYXk9IjUsMiIgZD0iTTc0Ljc2LC04Ny43Qzc0LjI0LC04MC40MSA3My42MiwtNzEuNzMgNzMuMDQsLTYzLjU0Ii8+Cjxwb2x5Z29uIGZpbGw9IiNiNTg5MDAiIHN0cm9rZT0iI2I1ODkwMCIgcG9pbnRzPSI3Ni41MywtNjMuMzQgNzIuMzMsLTUzLjYxIDY5LjU1LC02My44NCA3Ni41MywtNjMuMzQiLz4KPC9nPgo8L2c+Cjwvc3ZnPgo=" style="width: 100%"></figure>
    <p>A remote service (panic.deno.com) exposes an endpoint that accepts these encoded traces. When a trace is received:</p>
    <ul>
      <li>The service looks up the matching symcache in GCS.</li>
      <li>Resolves instruction addresses into human-readable function frames.</li>
      <li>Caches the result to a key-value database (KV) which provides fast address-to-module cache for future queries.</li>
    </ul>
    <h2 class="!text-foreground">References</h2>
    <p><a href="https://docs.rs/pdb-addr2line/latest/pdb_addr2line/">https://docs.rs/pdb-addr2line/latest/pdb_addr2line/</a></p>
  </body>
</html>
